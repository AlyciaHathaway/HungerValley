---
title: 音乐播放器的trouble
---

 - 知识点不熟的
 - 体验上不顺心的

**布局**

 - 图标要换成一组的

 - 歌手名没有overflow，功能键会下移

 - 歌手名overflow后是不是要写个title

 - 部分歌曲图片大小获取到的不太合适

**播放功能**

 - 音乐请求要加一把锁，如果遇到1s内无限次重复点击，就会无限的加载下去

 - pre不是数组最后一首

 - 播放结束没有监听ending，不自动播放下一首

 - 下一首或上一首的时候，黑胶碟也要从0开始旋转（是不是要设置开始帧？网易云感觉上是把它删掉重新加载）

**进度条**

 - 时间轴无法点击

 - 音乐时间少个0


**频道列表**

 - 频道列表请求也要加锁，避免重复点击

 - 频道列表在手机上无法缩回

 - 事件冒泡问题：如果不阻止li冒泡，就会在每一次点击后，执行父元素的点击，ul列表隐藏并清空

 - 为什么频道需要点击两次才能发起getSong请求？
 
	- 一开始锁是开着的，但音乐数组没缓存，会发两次请求，第二次锁上了，所以要把theLock放到getSong前面


**其它**

 - 每个变量有没有必要缓存一下？

 - 播放前后的由静变到动的状态是否能写成一个函数？每当播放时调用函数，每当暂停又调用一个函数

 - setTimeout调用函数自身，递归的出口在哪里，这样写会不会爆栈？

	```
	function updateProgress() {
		progress.value = audio.currentTime;
		setTimeout(updateProgress, 1000);
	}
	```

 - jQuery和原生DOM混合用，感觉有点乱糟糟的，要随时console这是原生DOM对象还是jQuery对象，有没有一种标识或是不混合使用的办法？